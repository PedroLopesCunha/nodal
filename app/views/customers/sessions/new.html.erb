<%= render "customers/shared/auth_logo" %>

<h1 class="auth-title"><%= t('auth.sign_in.welcome_back') %></h1>
<p class="auth-subtitle"><%= t('auth.sign_in.subtitle') %></p>

<%= simple_form_for(resource, as: resource_name, url: customer_session_path(org_slug: @organisation.slug), html: { class: "auth-form", data: { turbo: false } }) do |f| %>
  <div class="auth-field">
    <%= f.input :email,
                required: false,
                autofocus: true,
                placeholder: t('auth.sign_in.email_placeholder'),
                label: t('auth.sign_in.email'),
                input_html: { autocomplete: "email" } %>
  </div>

  <div class="auth-field">
    <div class="auth-label-row">
      <label class="auth-label"><%= t('auth.sign_in.password') %></label>
      <%= link_to t('auth.sign_in.forgot_password'), new_customer_password_path(org_slug: @organisation.slug), class: "auth-forgot-link" %>
    </div>
    <div class="auth-password-wrapper" data-controller="password-visibility">
      <%= f.input :password,
                  required: false,
                  placeholder: t('auth.sign_in.password_placeholder'),
                  label: false,
                  input_html: { autocomplete: "current-password", data: { password_visibility_target: "input" } } %>
      <button type="button" class="auth-password-toggle" data-action="password-visibility#toggle" aria-label="Toggle password visibility">
        <i class="fas fa-eye" data-password-visibility-target="icon"></i>
      </button>
    </div>
  </div>

  <% if devise_mapping.rememberable? %>
    <div class="auth-remember">
      <%= f.input :remember_me, as: :boolean, wrapper: false, label: t('auth.sign_in.remember_me') %>
    </div>
  <% end %>

  <div class="auth-actions">
    <%= f.button :submit, t('auth.sign_in.submit'), class: "auth-submit-btn" %>
  </div>
<% end %>

<div class="auth-powered-by">
  <a href="https://www.nodal-seiri.dev" target="_blank" rel="noopener">
    <%= t('auth.sign_in.powered_by') %> <span class="auth-powered-logo"><span class="auth-powered-icon">N</span>odal</span>
  </a>
</div>
