<% content_for :bo_main_content do%>

<div class="bo-page-header">
  <div class="d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center gap-3">
      <%= link_to bo_team_members_path(params[:org_slug]), class: "text-muted text-decoration-none" do %>
        <i class="fa-solid fa-arrow-left fa-lg"></i>
      <% end %>

      <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center text-white fw-bold" style="width: 60px; height: 60px; font-size: 1.25rem;">
        <i class="fa-solid fa-user-plus"></i>
      </div>

      <div>
        <h1><%= t('bo.team_members.new.title') %></h1>
        <span class="text-muted"><%= t('bo.team_members.new.subtitle', organisation: current_organisation.name) %></span>
      </div>
    </div>

    <div class="bo-page-actions">
      <%= link_to bo_team_members_path(params[:org_slug]), class: "btn btn-outline-secondary" do %>
        <%= t('bo.common.actions.cancel') %>
      <% end %>
      <button type="submit" form="invite-form" class="btn btn-primary">
        <i class="fa-solid fa-paper-plane"></i> <%= t('bo.team_members.form.send_invitation') %>
      </button>
    </div>
  </div>
</div>

<div class="bo-page-body">

<%= form_with model: @org_member, url: bo_team_members_path(params[:org_slug]), method: :post, id: "invite-form" do |f| %>
  <div class="row g-3">
    <div class="col-md-8">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title mb-4"><%= t('bo.team_members.new.invitation_details') %></h5>

          <div class="row g-3">
            <div class="col-md-12">
              <label class="form-label"><%= t('bo.team_members.form.email') %></label>
              <%= f.email_field :invited_email, class: "form-control", placeholder: t('bo.team_members.form.email_placeholder'), required: true %>
              <small class="text-muted"><%= t('bo.team_members.new.email_hint') %></small>
            </div>
          </div>

          <div class="row g-3 mt-1">
            <div class="col-md-12">
              <label class="form-label"><%= t('bo.team_members.form.role') %></label>
              <%= f.select :role, [
                [t('bo.team_members.new.role_member_desc'), 'member'],
                [t('bo.team_members.new.role_admin_desc'), 'admin'],
                [t('bo.team_members.new.role_owner_desc'), 'owner']
              ], {}, class: "form-select" %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title mb-4"><%= t('bo.team_members.new.role_permissions') %></h5>

          <div class="mb-3">
            <div class="fw-semibold text-secondary mb-2">
              <i class="fa-solid fa-user"></i> <%= t('bo.team_members.roles.member') %>
            </div>
            <ul class="small text-muted mb-0 ps-3">
              <li><%= t('bo.team_members.new.permissions.view_dashboard') %></li>
              <li><%= t('bo.team_members.new.permissions.manage_customers') %></li>
              <li><%= t('bo.team_members.new.permissions.manage_products') %></li>
              <li><%= t('bo.team_members.new.permissions.manage_orders') %></li>
            </ul>
          </div>

          <div class="mb-3">
            <div class="fw-semibold text-warning mb-2">
              <i class="fa-solid fa-user-gear"></i> <%= t('bo.team_members.roles.admin') %>
            </div>
            <ul class="small text-muted mb-0 ps-3">
              <li><%= t('bo.team_members.new.permissions.all_member') %></li>
              <li><%= t('bo.team_members.new.permissions.invite_members') %></li>
              <li><%= t('bo.team_members.new.permissions.deactivate_members') %></li>
            </ul>
          </div>

          <div>
            <div class="fw-semibold text-danger mb-2">
              <i class="fa-solid fa-crown"></i> <%= t('bo.team_members.roles.owner') %>
            </div>
            <ul class="small text-muted mb-0 ps-3">
              <li><%= t('bo.team_members.new.permissions.all_admin') %></li>
              <li><%= t('bo.team_members.new.permissions.edit_settings') %></li>
              <li><%= t('bo.team_members.new.permissions.change_roles') %></li>
              <li><%= t('bo.team_members.new.permissions.remove_members') %></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>

</div>

<% end %>
