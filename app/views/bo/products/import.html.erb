<% content_for :bo_main_content do %>

<div class="bo-page-header">
  <div class="d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center gap-3">
      <%= link_to bo_products_path(params[:org_slug]), class: "text-muted text-decoration-none" do %>
        <i class="fa-solid fa-arrow-left fa-lg"></i>
      <% end %>

      <div class="rounded bg-secondary d-flex align-items-center justify-content-center text-white" style="width: 60px; height: 60px;">
        <i class="fa-solid fa-file-import fa-lg"></i>
      </div>

      <div>
        <h1><%= t('bo.products.import.title') %></h1>
        <span class="text-muted"><%= t('bo.products.import.subtitle') %></span>
      </div>
    </div>
  </div>
</div>

<div class="bo-page-body">

<div class="row">
  <div class="col-md-8">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-4"><%= t('bo.products.import.upload_file') %></h5>

        <%= form_with url: import_mapping_bo_products_path(params[:org_slug]), method: :post, multipart: true, id: "import-form", data: { controller: "file-upload", turbo: false } do %>
          <div class="mb-4">
            <div class="border border-2 border-dashed rounded p-5 text-center"
                 data-file-upload-target="dropZone"
                 data-action="dragover->file-upload#dragover dragenter->file-upload#dragenter dragleave->file-upload#dragleave drop->file-upload#drop">
              <i class="fa-solid fa-cloud-arrow-up fa-3x text-muted mb-3"></i>
              <p class="mb-2"><%= t('bo.products.import.drag_drop') %></p>
              <p class="text-muted mb-3"><%= t('bo.products.import.or') %></p>
              <label class="btn btn-outline-primary">
                <%= t('bo.products.import.browse_files') %>
                <input type="file"
                       name="file"
                       accept=".csv"
                       class="d-none"
                       data-file-upload-target="input"
                       data-action="change->file-upload#fileSelected"
                       required>
              </label>
              <p class="text-muted mt-3 mb-0" data-file-upload-target="fileName"><%= t('bo.products.import.csv_only') %></p>
            </div>
          </div>

          <div class="d-flex justify-content-end gap-2">
            <%= link_to bo_products_path(params[:org_slug]), class: "btn btn-outline-secondary" do %>
              <%= t('bo.common.actions.cancel') %>
            <% end %>
            <button type="submit" class="btn btn-primary">
              <i class="fa-solid fa-arrow-right"></i> <%= t('bo.products.import.next_step') %>
            </button>
          </div>
        <% end %>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3"><%= t('bo.products.import.instructions_title') %></h5>
        <p class="text-muted"><%= t('bo.products.import.instructions_desc') %></p>

        <h6 class="mt-4"><%= t('bo.products.import.available_fields') %></h6>
        <ul class="list-unstyled">
          <li><code>name</code> - <%= t('bo.products.import.field_name') %> <span class="badge bg-danger"><%= t('bo.common.forms.required') %></span></li>
          <li><code>description</code> - <%= t('bo.products.import.field_description') %></li>
          <li><code>sku</code> - <%= t('bo.products.import.field_sku') %></li>
          <li><code>price</code> - <%= t('bo.products.import.field_price') %></li>
          <li><code>unit_description</code> - <%= t('bo.products.import.field_unit_description') %></li>
          <li><code>min_quantity</code> - <%= t('bo.products.import.field_min_quantity') %></li>
          <li><code>min_quantity_type</code> - <%= t('bo.products.import.field_min_quantity_type') %></li>
          <li><code>available</code> - <%= t('bo.products.import.field_available') %></li>
        </ul>

        <div class="alert alert-info mt-4">
          <i class="fa-solid fa-info-circle me-2"></i>
          <%= t('bo.products.import.sku_upsert_hint') %>
        </div>
      </div>
    </div>
  </div>
</div>

</div>

<% end %>
